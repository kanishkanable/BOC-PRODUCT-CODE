UI={base:"",userview_app_id:"",userview_id:"",escapeHTML:function(a){return null==a||void 0==a?"":$("<span></span>").text(a).html()},userviewThemeParams:function(){var a="";return void 0!=UI.userview_app_id&&""!=UI.userview_app_id&&(a+="&__a_="+UI.userview_app_id,a+="&__u_="+UI.userview_id),a},getPopUpHeight:function(a){void 0!==a&&""!==a||(a="90%");var b=$(window).height(),c=200,d=b-100;if(isNaN(a)&&-1!==a.indexOf("%")){a=b*parseFloat(a.replace("%",""))/100}return a>d&&(a=d),a<c&&(a=c),a},getPopUpWidth:function(a){void 0!==a&&""!==a||(a="90%");var b=$(window).width(),c=200,d=b-100;if(isNaN(a)&&-1!==a.indexOf("%")){a=b*parseFloat(a.replace("%",""))/100}return a>d&&(a=d),a<c&&(a=c),a},adjustPopUpDialog:function(a){a.center("x"),a.center("y")}},PopupDialog=function(a,b,c){this.src=a,this.title=b,c&&(this.windowName=c)},PopupDialogCache={popupDialog:null},PopupDialog.closeDialog=function(){var a=PopupDialogCache.popupDialog;if(null!=a)a.close();else if(null==a&&opener)try{a=opener.PopupDialogCache.popupDialog,a.close()}catch(a){window.close()}else null==a&&parent&&parent.PopupDialogCache&&parent.PopupDialogCache.popupDialog&&(a=parent.PopupDialogCache.popupDialog,a.close())},PopupDialog.prototype={width:860,height:520,title:" ",src:null,windowName:null,popupDialog:null,popupWindow:null,init:function(){this.show()},show:function(){HelpGuide.hide();var a=this.src;if(a.indexOf("?")<0&&(a+="?"),a+="&_="+(new Date).valueOf().toString(),a+=UI.userviewThemeParams(),PopupDialogCache.popupDialog=this,this.windowName){var b=this.width&&this.height?"width="+this.width+",height="+this.height+",resizable=1,scrollbars=1,top=50,left=50":null;return void(this.popupWindow=b?window.open(this.src,this.windowName,b):window.open(this.src,this.windowName))}var c=$(window).width(),d=$(window).height();c>=768?(this.width=.8*c,this.height=.9*d):(this.width=c-20,this.height=d-20);var f=document.getElementById("jqueryDialogDiv"),g=document.getElementById("jqueryDialogFrame");f||(f=document.createElement("DIV"),f.setAttribute("id","jqueryDialogDiv"),g||(g=document.createElement("IFRAME"),g.setAttribute("id","jqueryDialogFrame"),g.setAttribute("name","jqueryDialogFrame"),g.setAttribute("frameborder","0"),g.setAttribute("width","100%"),void 0===UI.userview_app_id||""===UI.userview_app_id?(g.setAttribute("height",this.height-20),g.setAttribute("scrolling","no")):g.setAttribute("height",this.height-40),/iPhone|iPod|iPad/.test(navigator.userAgent)&&(g.onload=function(){$(document).scrollTop(0),$("#jqueryDialogDiv").height($("#jqueryDialogFrame").height())}),f.appendChild(g),document.body.appendChild(f)),/iPhone|iPod|iPad/.test(navigator.userAgent)&&$("#jqueryDialogDiv").css({overflow:"visible"}));var h=function(){var b=document.getElementById("jqueryDialogFrame");null!=b&&setTimeout(function(){b.setAttribute("src",a)},100),/iPhone|iPod|iPad/.test(navigator.userAgent)?($(".ui-dialog.ui-widget").css("position","absolute"),$(".ui-dialog.ui-widget").css("top","5%"),$(".ui-dialog .ui-dialog-titlebar-close").css({"z-index":"99999",height:"30px",width:"30px","background-color":"red"})):($(".ui-dialog.ui-widget").css("position","fixed"),$(".ui-dialog.ui-widget").css("top","5%"),$("body").addClass("stop-scrolling"))},i=function(){$("body").removeClass("stop-scrolling");var a=document.getElementById("jqueryDialogFrame");null!=a&&a.setAttribute("src","")};this.popupDialog=$(f).dialog({modal:!0,width:this.width,height:this.height,position:"center",draggable:!1,autoOpen:!0,resizable:!1,overlay:{opacity:.5,background:"black"},open:h,close:i,zIndex:15001})},close:function(){$("body").removeClass("stop-scrolling");var a=!1;return this.popupWindow?(this.popupWindow.close(),this.popupWindow=null,a=!0):(null!=this.popupDialog&&(this.popupDialog.dialog("close"),this.popupDialog=null,a=!0),PopupDialogCache.popupDialog=null),a}},Link=function(a,b,c,d){this.href=a,this.param=b,this.queryString=c,this.popupDialog=d},Link.prototype={href:null,param:null,value:null,suffix:null,queryString:!1,post:!1,popupDialog:null,init:function(){var a=this.href;if(this.param)if(this.queryString){var c=a.indexOf("?")>=0;c||(a+="?"),a+=this.param+"="+escape(this.value)}else{var b="/"==a.match("/$");b||(a+="/"),a+=escape(this.value),this.suffix&&(a+=this.suffix)}if(this.popupDialog)this.popupDialog.src=a,this.popupDialog.show.apply(this.popupDialog);else if(this.post){a.indexOf("?")<0&&(a+="?"),a+="&"+ConnectionManager.tokenName+"="+ConnectionManager.tokenValue;var d=$("#ui_link_form:first");d.length>0?(d.attr("method","POST"),d.attr("action",a)):(d=$("<form method='POST' action='"+a+"'></form>"),$(document).append(d)),d.submit()}else window.location=a}},JsonTable=function(a,b){this.divToUpdate=a,this.url=b},JsonTable.initialized=!1,JsonTable.prototype={divToUpdate:"",url:"",jsonData:"data",useRp:!0,rowsPerPage:10,width:"600",height:"298",sort:null,desc:!1,checkbox:!1,checkboxSelectSingle:!1,checkboxSelection:!1,fields:[],columns:[],history:null,link:null,dataTable:null,dataSource:null,paginator:null,initialState:"",flexiGrid:null,key:"id",buttons:null,customPreProcessor:null,init:function(){var thisObject=this,handleRowSelection=function(a,b){$(a).click(function(){var c=$(a).parents("tr:first"),d=c.find('input[type="checkbox"], input[type="radio"]'),e=d.length>0&&$(a).find('input[type="checkbox"], input[type="radio"]').length>0;if(thisObject.link&&!e)return thisObject.link.value=b.replace(/__dot__/g,"."),thisObject.link.init(),!1;if(!e){var f=$(d[0]);thisObject.checkboxSelectSingle?f.click():(f.attr("checked",!f.attr("checked")),toggleCheckbox(f.attr("id")))}return!0})},gridColumns=this.columns,idx;for(idx=0;idx<gridColumns.length;idx++){var col=gridColumns[idx];col.key&&(col.name=col.key),col.label&&(col.display=col.label),col.width||("string"==typeof thisObject.width&&"%"==thisObject.width.charAt(thisObject.width.length-1)?col.width=150:"string"==typeof thisObject.width&&"px"==thisObject.width.substring(thisObject.width.length-2)?col.width=150:col.width=Math.round(thisObject.width/gridColumns.length)-20),col.process=handleRowSelection,gridColumns[idx]=col}var dataPreProcess=function(a){thisObject.customPreProcessor&&(a=thisObject.customPreProcessor(a));var d,e,b=thisObject.link?thisObject.link.param:thisObject.key,c=a.data,f=new Array;for(c?c&&!c.length&&(c=[c]):c=new Array,d=0;d<c.length;d++){var g=new Array,h=c[d];for(e=0;e<this.colModel.length;e++){var i=this.colModel[e].name;if(thisObject.checkbox&&"checkbox"==i){var j="";-1!=$("#"+thisObject.divToUpdate+"_selectedIds").html().indexOf(h[b])&&(j='checked="true"'),h[i]='<input type="checkbox" class="'+thisObject.divToUpdate+'-checkbox-list" id="'+thisObject.divToUpdate+"_checkbox_"+d+'" '+j+"onclick=\"toggleCheckbox('"+thisObject.divToUpdate+"_checkbox_"+d+"')\">"}else if(thisObject.checkbox&&thisObject.checkboxSelectSingle&&"radio"==i)h[i]='<input type="radio" id="'+thisObject.divToUpdate+"_radio_"+d+'" name="'+thisObject.divToUpdate+'_radio" onclick="'+thisObject.divToUpdate+"_toggleRadioButton('"+thisObject.divToUpdate+"_radio_"+d+"')\">";else{var k=this.colModel[e].relaxed;k||(h[i]=UI.escapeHTML(h[i]))}g.push(h[i])}var l=new Object;l.id=encodeURIComponent(h[b].replace(/\./g,"__dot__")),l.cell=g,f.push(l)}var m=new Object;return m.total=a.total,m.rows=f,m.page=this.newp,m},handleButtonClick=function(command,grid){var i;for(i=0;i<thisObject.buttons.length;i++){var name=thisObject.buttons[i].name;if(name==command){var callback=thisObject.buttons[i].callback,selectedRows=thisObject.getSelectedRows(),functionCall=callback+"(selectedRows)",result=eval(functionCall);return result}}},gridButtons=null;if(this.buttons){gridButtons=new Array;var i;for(i=0;i<this.buttons.length;i++){var label=this.buttons[i].name,callback=this.buttons[i].callback,cssClass=this.buttons[i].cssClass;cssClass||(cssClass="add"),gridButtons.push({name:label,bclass:cssClass,onpress:function(a,b){handleButtonClick(a,b)}})}}var gridSearchItems=null,newUrl=thisObject.url;newUrl.indexOf("?")<0&&(newUrl+="?"),newUrl+="&_="+(new Date).valueOf().toString(),this.flexiGrid=$("#"+thisObject.divToUpdate).flexigrid({url:newUrl,dataType:"json",method:"GET",colModel:gridColumns,buttons:gridButtons,searchItems:gridSearchItems,sortname:thisObject.sort,sortorder:thisObject.desc?"desc":"asc",usepager:!0,useRp:thisObject.useRp,rp:thisObject.rowsPerPage,showTableToggleBtn:!0,width:thisObject.width,height:thisObject.height,resizable:!1,singleSelect:!thisObject.checkbox||thisObject.checkboxSelectSingle,preProcess:dataPreProcess})},refresh:function(){var a=this,b=a.url;b.indexOf("?")<0&&(b+="?"),b+="&_="+(new Date).valueOf().toString(),this.flexiGrid.flexReload({url:b})},load:function(a){a&&(a+="&_="+(new Date).valueOf().toString(),this.flexiGrid[0].p.newp=1,this.flexiGrid.flexReload({url:a}))},closeDialog:function(){this.link&&this.link.popupDialog&&this.link.popupDialog.close()},getSelectedRows:function(){var a=new Array;if(this.checkbox&&this.checkboxSelectSingle){var c,b=$(".trSelected",this.flexiGrid);for(c=0;c<b.length;c++){var d=b[c].id.substring(3).replace(/__dot__/g,".");a.push(d)}}else if(null!=$("#"+this.divToUpdate+"_selectedIds").html()){var e=$("#"+this.divToUpdate+"_selectedIds").html().substring(1,$("#"+this.divToUpdate+"_selectedIds").html().length);a=e.split(",")}return a}},JsonTree=function(a,b){this.divToUpdate=a,this.nodeUrl=b},JsonTree.callbacks=[],JsonTree.prototype={divToUpdate:"",nodeUrl:"",baseUrl:"",title:"",jsonData:"data",nodeKey:"id",nodeLabel:"label",nodeDescription:"description",nodeCount:"count",xss:!1,treeView:{},link:null,init:function(){var a=this,b=a.nodeUrl;a.xss&&(b.indexOf("?")<0&&(b+="?"),b+="&callback=JsonTree.callbacks['"+a.divToUpdate+"']",JsonTree.callbacks[a.divToUpdate]=function(b){var c=$(a.treeView).dynatree("getRoot");b&&c.appendData(b)}),a.treeView=$("#"+a.divToUpdate).dynatree({title:a.title,rootVisible:null!=a.title&&""!=a.title,onSelect:function(b){b.data[a.nodeKey]&&(a.link&&(a.link.value=b.data[a.nodeKey],a.link.init()),b.unselect(),b.tree.tnSelected=null)},initAjax:{url:b,dataType:"json",xss:a.xss},onLazyRead:function(b){var c=b.data.url;if(c){var d=a.baseUrl;"/"!=d.match("/$")&&"/"!=c.charAt(0)&&(d+="/"),c=d+c,a.xss&&(c.indexOf("?")<0&&(c+="?"),c+="&callback=JsonTree.callbacks['"+a.divToUpdate+"']",JsonTree.callbacks[a.divToUpdate]=function(a){b.appendData(a)}),b.appendAjax({url:c,dataType:"json",xss:a.xss})}}})},refresh:function(){var a=$(this.treeView).dynatree("getRoot");a.div.parentNode.removeChild(a.div),a.aChilds=null,this.init()},closeDialog:function(){this.link&&this.link.popupDialog&&this.link.popupDialog.close()}},TabView=function(a,b){this.div=a,this.orientation=b},TabView.prototype={div:"",orientation:"top",tabView:"",selectFunction:null,init:function(){this.tabView=$("#"+this.div).tabs()},getTab:function(a){},select:function(a){this.tabView.tabs("option","active",$(a).index())},disable:function(a){this.tabView.tabs("disable",a)}},Calendar={show:function(a){$("#"+a).datepicker({dateFormat:"yy-mm-dd"})}},Menu={show:function(a){jquerycssmenu.buildmenu(a,arrowimages)}},BubbleDialog={show:function(a,b,c,d,e){this.updatePosition(a,b,c,d),$(b).css("display","block"),$(b).show("slide",e);var f=this;$(window).resize(function(){f.updatePosition(a,b,c,d)})},updatePosition:function(a,b,c,d){var e=$(a).offset(),f=$(a).width(),g=e.top+"px";null!=c&&(g=e.top+parseInt(c)+"px"),cLeft=e.left+f+"px",null!=d&&(cLeft=e.left+f+parseInt(d)+"px"),$(b).css({left:cLeft,top:g})}},HelpGuide={prefix:"help.",url:"/web/help/guide",attachTo:null,key:null,definition:null,enable:function(){$.cookie("helpGuide","true",{expires:3650,path:HelpGuide.base})},disable:function(){HelpGuide.hide(),$.cookie("helpGuide","false",{expires:3650,path:HelpGuide.base})},isEnabled:function(){return"false"!=$.cookie("helpGuide")},toggle:function(){HelpGuide.isEnabled()?HelpGuide.disable():HelpGuide.enable()},show:function(){var a=null==HelpGuide.key?HelpGuide.determineKey():HelpGuide.key;$.ajax({type:"GET",data:{key:a},dataType:"text",url:HelpGuide.base+HelpGuide.url,success:function(a){var b=a;HelpGuide.startGuide(b)}})},hide:function(){void 0!=window.guiders&&guiders.hideAll()},determineKey:function(){var a="",b=HelpGuide.base+"\\/(.*)",c=location.pathname.match(b);return c&&c.length>0&&(a=c[1]),""!=a&&(a=a.replace(/\/\//g,"/"),a=a.replace(/\//g,"."),a=HelpGuide.prefix+a),a},insertButton:function(a){var b=$('<span id="main-action-help"></span>');0==$("#main-action-help").length&&(a||(a=document.body),$(a).prepend(b)),$("#main-action-help").css("display","block"),$("#main-action-help").click(function(){HelpGuide.hide(),HelpGuide.enable(),HelpGuide.show()})},startGuide:function(helpJson){var helpDefObj;if(""!=helpJson)try{helpDefObj=eval(helpJson)}catch(a){}if(null==helpDefObj&&(helpDefObj=HelpGuide.definition),helpDefObj&&helpDefObj.length>0){HelpGuide.insertButton(HelpGuide.attachTo);var active=HelpGuide.isEnabled();active&&setTimeout(function(){for(i=0;i<helpDefObj.length;i++){var a=helpDefObj[i];HelpGuide.displayGuide(a)}},500)}},displayGuide:function(a){if(void 0!=window.guiders){var b=guiders.createGuider(a);a.show&&b.show()}}};